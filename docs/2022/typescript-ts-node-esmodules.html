<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="twitter:card" content="summary" />
    <meta property="og:url" content="https://japanese-document.github.io/tips/2022/typescript-ts-node-esmodules.html" />
    <meta property="og:title" content="ts-nodeでESModulesを使う方法" />
    <meta property="og:description" content="設定下記の設定をします。package.jsonに&quot;type&quot;: &quot;module&quot;を加えます。tsconfig.jsonのcompilerOptions.moduleを&quot;ESNext&quot;にします。tsconfig.jsonのts-nodeを次のようにします。{  &quot;ts-node&quot;: {    &quot;esm&quot;: true,    &quot;require&quot;: [&quot;tsconfig-paths/register&quot;]  }}tsconfig-pathsをインストールします。" />
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/42838312?s=400" />
    <meta name="theme-color" content="#f1f7fe" />
    <meta name="description" content="設定下記の設定をします。package.jsonに&quot;type&quot;: &quot;module&quot;を加えます。tsconfig.jsonのcompilerOptions.moduleを&quot;ESNext&quot;にします。tsconfig.jsonのts-nodeを次のようにします。{  &quot;ts-node&quot;: {    &quot;esm&quot;: true,    &quot;require&quot;: [&quot;tsconfig-paths/register&quot;]  }}tsconfig-pathsをインストールします。" />
    <title>ts-nodeでESModulesを使う方法</title>
    <link rel="stylesheet" href="/tips/app.css?v=001" type="text/css"  media="all" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L9VVC74WWF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-L9VVC74WWF');
    </script>
  </head>
  <body class="container">
    <div class="side"></div>
    <main class="main markdown-body">
      <h1 id="ts-nodeでESModulesを使う方法"><a href="#ts-nodeでESModulesを使う方法">ts-nodeでESModulesを使う方法</a></h1>
<h2 id="設定"><a href="#設定">設定</a></h2>
<p>下記の設定をします。</p>
<ul>
<li><p><code>package.json</code>に<code>"type": "module"</code>を加えます。</p>
</li>
<li><p><code>tsconfig.json</code>の<code>compilerOptions.module</code>を<code>"ESNext"</code>にします。</p>
</li>
<li><p><code>tsconfig.json</code>の<code>ts-node</code>を次のようにします。</p>
</li>
</ul>
<pre><code>{
  "ts-node": {
    "esm": true,
    "require": ["tsconfig-paths/register"]
  }
}
</code></pre>
<ul>
<li><p><a class="Link" href="https://github.com/dividab/tsconfig-paths">tsconfig-paths</a>をインストールします。
(しない場合、<code>CustomError: Cannot find module</code>のエラーが発生します。)</p>
</li>
<li><p>importする際にpathに<code>.js</code>を付けます。</p>
</li>
<li><p><code>package.json</code>に下記のような処理を実行する設定を追加します。</p>
</li>
</ul>
<pre><code class="language-json">{
  "scripts": {
    "execute": "ts-node scripts/index.ts"
  }
}
</code></pre>
<p><a class="Link" href="https://typestrong.org/ts-node/docs/imports#native-ecmascript-modules">Native ECMAScript modules</a><br><a class="Link" href="https://typestrong.org/ts-node/docs/paths/">paths and baseUrl</a></p>
<h2 id="ESLint"><a href="#ESLint">ESLint</a></h2>
<p>ESLint(typescript-eslint)を使用する場合は設定ファイルの拡張子を<code>.cjs</code>にします。(例: <code>eslintrc.cjs</code>)
これをしない場合、<code>Error [ERR_REQUIRE_ESM]</code>が発生します。</p>

    </main>
    <div class="side"></div>
    <div class="side"></div>
    <footer class="footer markdown-body">
      <a href="/tips">Top</a>
    </footer>
    <div class="side"></div>
  </body>
</html>