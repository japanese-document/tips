<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="twitter:card" content="summary" />
    <meta property="og:url" content="https://japanese-document.github.io/tips/2023/javascript-nodejs-promisify-function.html" />
    <meta property="og:title" content="JavaScript(NodeJS)でコールバック関数をPromise化する " />
    <meta property="og:description" content="util.promisify(original)を使います。コールバック関数は関数の最後の引数である必要があります。コールバック関数はエラーが最初の引数として渡される必要があります。((err, value) =&gt; {...})下記はglobをPromise化する例です。import { promisify } from 'node:util'import glob from 'glob'function getFileNames(): Promise {  return promisify(glob)('./**/*.md').catch((err) =&gt; {    co" />
    <meta property="og:image" content="https://avatars2.githubusercontent.com/u/42838312?s=400" />
    <meta name="theme-color" content="#f1f7fe" />
    <meta name="description" content="util.promisify(original)を使います。コールバック関数は関数の最後の引数である必要があります。コールバック関数はエラーが最初の引数として渡される必要があります。((err, value) =&gt; {...})下記はglobをPromise化する例です。import { promisify } from 'node:util'import glob from 'glob'function getFileNames(): Promise {  return promisify(glob)('./**/*.md').catch((err) =&gt; {    co" />
    <title>JavaScript(NodeJS)でコールバック関数をPromise化する </title>
    <link rel="stylesheet" href="/tips/app.css?v=001" type="text/css"  media="all" />
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-L9VVC74WWF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-L9VVC74WWF');
    </script>
  </head>
  <body class="container">
    <div class="left-side">
    <div class="index-menu">
      <details open="">
        <summary>CSS</summary>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/css-has-pseudo-class.html">特定の子要素を持つ要素を指定するCSSセレクタ</a></p>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/css-is-pseudo-class.html">CSSセレクタで共通の子要素を持つ親要素をまとめる</a></p>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2023/css-chrome-devtools-diff.html">Chrome Devtoolsで変更したCSSの差分を確認する</a></p>
      </details>
      <details open="">
        <summary>Git</summary>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/git-remove-branches-without-main.html">Gitでmainブランチ以外のブランチを削除する</a></p>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/git-alias.html">Gitでaliasを設定する</a></p>
      </details>
      <details open="">
        <summary>JavaScript</summary>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/javascript-first-line-from-string.html">JavaScriptで文字列から最初の1行を取得する</a></p>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/javascript-insert-items-to-array.html">JavaScriptで配列に値を挿入する</a></p>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/javascript-last-item-in-arrray.html">JavaScriptで配列の最後の値を取得する</a></p>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/javascript-marked.html">Marked</a></p>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2023/javascript-nodejs-promisify-function.html">JavaScript(NodeJS)でコールバック関数をPromise化する </a></p>
      </details>
      <details open="">
        <summary>Python</summary>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/python-simple-server.html">PythonでWebサーバをたてるコマンド</a></p>
      </details>
      <details open="">
        <summary>Lit</summary>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/lit-signals.html">Litでシグナル(Signals)を使う</a></p>
      </details>
      <details open="">
        <summary>AWS</summary>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/aws-cli-config.html">aws-cliの設定ファイルの例</a></p>
      </details>
      <details open="">
        <summary>TypeScript</summary>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/typescript-ts-node-esmodules.html">ts-nodeでESModulesを使う方法</a></p>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2022/typescript-dompurify-and-jsdom.html">TypeScriptでDOMPurifyとjsdomを使う方法</a></p>
      </details>
      <details open="">
        <summary>Go</summary>
        <p><a class="Link" href="https://japanese-document.github.io/tips/2023/golang-slices-contains.html">Goで指定した値が配列内に存在するか判別する</a></p>
      </details>
    </div></div>
    <main class="main markdown-body">
      <h1 id="JavaScript(NodeJS)でコールバック関数をPromise化する"><a href="#JavaScript(NodeJS)でコールバック関数をPromise化する">JavaScript(NodeJS)でコールバック関数をPromise化する</a></h1>
<p><a class="Link" href="https://nodejs.org/api/util.html#utilpromisifyoriginal">util.promisify(original)</a>を使います。
コールバック関数は関数の最後の引数である必要があります。
コールバック関数はエラーが最初の引数として渡される必要があります。(<code>(err, value) =&gt; {...}</code>)</p>
<p>下記は<a class="Link" href="https://github.com/isaacs/node-glob">glob</a>をPromise化する例です。</p>
<pre><code class="language-js">import { promisify } from 'node:util'
import glob from 'glob'

function getFileNames(): Promise&lt;string[]&gt; {
  return promisify(glob)('./**/*.md').catch((err) =&gt; {
    console.error(err)
    process.exit(1)
  })
}
</code></pre>

    </main>
    <div class="right-side"></div>
    <footer class="footer markdown-body">
      <a href="/tips">Top</a>
    </footer>
  </body>
</html>